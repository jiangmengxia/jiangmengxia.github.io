# 浏览器垃圾回收机制
## 概述
浏览器垃圾回收（Garbage Collection，GC）是一种自动内存管理机制，它用于回收不再使用的内存空间。以下是一些关于浏览器垃圾回收机制的详细说明：
* 内存管理：在浏览器中，内存管理是指分配和释放内存的过程。当浏览器加载网页时，它会分配内存来存储网页的内容和资源。当网页被关闭或卸载时，浏览器会释放这些内存空间。
* 垃圾回收：垃圾回收是指自动检测和释放不再使用的内存空间的过程。垃圾回收器会定期扫描内存空间，找出不再使用的对象，并将其标记为垃圾。然后，垃圾回收器会释放这些对象的内存空间。
* 垃圾回收算法：浏览器使用不同的垃圾回收算法，如标记-清除算法、引用计数算法等，来检测和释放垃圾。标记-清除算法是一种常见的垃圾回收算法，它通过标记和清除两个阶段，来检测和释放垃圾。
* 垃圾回收触发：垃圾回收的触发时机取决于浏览器的实现和配置。一般来说，垃圾回收会在以下情况下触发：
    * 内存不足：当浏览器的内存不足时，垃圾回收器会自动触发，以释放内存空间。
    * 定期触发：垃圾回收器会定期触发，以检测和释放垃圾。触发的时间间隔取决于浏览器的实现和配置。
    * 手动触发：浏览器提供了一些API，如window.gc()，可以手动触发垃圾回收。
* 垃圾回收性能：垃圾回收会消耗一定的CPU资源和时间，因此可能会影响浏览器的性能。为了提高垃圾回收的性能，浏览器使用了一些优化技术，如分代回收、增量回收等。

## 常见垃圾回收机制
* 引用计数器法：当该对象被其他对象使用一次，计数器加1，反之不被引用时，计数器减1，当计数器为0，表示不被使用，该变量可以被回收。
    优点：计算简单、效率高
    缺点：存在引用环的时候，无法判断变量是否可以被回收

* 标记-清除法：分为标记阶段和清除阶段。
    标记阶段从根节点出发，根据引用关系链，在链上面的变量被认为是在使用的，不再链上面的变量被认为可以回收。
    清除阶段将不再引用链上面的变量清除。    
    
    优点：解决了引用环的问题
    缺点：清除阶段会带来内存碎片，导致内存空间不连续，影响内存分配效率。

* 标记-整理-清除：可以看作是标记-清除的增强版本，他在标记阶段的操作和标记清除一致，但是清除阶段之前会先执行整理，移动对象位置，对内存空间进行压缩，目的是为将碎片化内存合并成更大的内存。
    优点：解决了内存碎片问题
    缺点：整理阶段会消耗更多的时间

## V8回收机制


