# useState

### **useState**

它利用闭包，允许在函数组件中存储、使用状态。useState接受一个初始状态作为参数，并返回一个包含当前状态和更新状态的数组。 useState的参数：可以是一个值，或者一个返回值的函数。当参数是一个函数时，这个函数的返回值会被用作初始状态。这个函数只会被调用一次，即组件首次渲染的时候（re-render时不会被调用），一般用在初始值是动态值的情况。 useState的注意事项：每次调用useState都会创建一个新的状态变量（不是同一个状态），因此不能在循环、条件或嵌套函数中调用useState。

useState本身是异步的（下一个周期才更新，react状态更新是批量的、链式的），所以不能依赖前一次的状态值，如果需要依赖前一次的状态值，可以使用函数式更新，即传入一个函数，函数的参数是前一次的状态值，函数的返回值是新的状态值。

useState也是可以是同步的，场景有：&#x20;

（1）在 React 18 及更高版本中，使用并发特性：在 React 18 及更高版本中，引入了并发特性，如 startTransition。当状态更新被包裹在 startTransition 中时，React 会立即处理这些更新，而不是将其放入队列中。这可以确保在用户交互过程中，状态更新能够立即反映出来。
