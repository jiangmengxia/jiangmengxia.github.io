# 事件机制

react本身利用合成事件机制，将事件绑定在`document`上，避免了直接在dom上绑定事件，减少了内存消耗，同时解决了跨浏览器兼容性问题。

## 事件注册

挂载后，react会将所有支持的事件（allNativeEvents）绑定在document上面，也就是监听这些原生事件的回调函数，当这些事件触发时，react会根据事件类型，找到对应的合成事件，然后执行对应的回调函数。

## 事件监听-委托机制

就是将事件统一绑定到Root节点上，集中监听，并模拟冒泡、捕获的过程，从而减少内存消耗，提高性能。

## 事件触发

当事件触发时，react会根据原生事件的target，找到对应fiber节点，然后根据fiber的层级关系，模拟冒泡、捕获的过程，依次执行各个回调函数。

## 事件合成

react会将事件合成一个对象，这个对象包含了事件的相关信息，比如事件类型、事件目标、事件源等。 （1）性能：合成事件，将不同的事件分门别类，简化事件传参，减少内存消耗，提高性能。

&#x20;（2）兼容性：合成事件可以进行polyfill，兼容不同浏览器，提高兼容性&#x20;

（3）安全性：合成事件函数对事件对象进行了封装，避免了开发者直接操作原生 DOM 事件对象，降低了安全风险。



本人在理解了事件机制后，通过手写代码来进一步理解和掌握React的事件机制，手写代码跟源码接近，只是为了方便理解，简化了源码的实现，移步至以下小节☞

[事件注册](shi-jian-zhu-ce-registersimpleevents.md)

[事件监听](shi-jian-jian-ting-listentoallsupportedevents.md)

[事件合成](shi-jian-he-cheng-createsyntheticevent.md)

[事件分发](shi-jian-fen-fa-dispatchevent.md)

