(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-readTask-readTask"],{1712:function(t,i,e){"use strict";(function(t){var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("5176")),s=n(e("f5c6")),a={data:function(){return{windowMinusFixedHeight:0,scroll:!1,transitionY:0,transitionYDuration:100,mode:!1,hideLeft:!1,showRight:!1,right:null,left:null,timer:null,inter:null,list:[],finishedList:[],lastLength:0,preLength:0,income:0,showIncome:!1,timeout:null}},watch:{list:function(i){i.length<5&&(t.log("--------------------------请求"),this.getTaskList())}},methods:{report:function(){},toggleMode:function(){this.mode=!this.mode},modeOut:function(){uni.navigateBack({delta:2})},nextNews:function(){var t=this;null!=this.right?(this.transitionY="0px",this.showRight=!0,this.hideLeft=!0,this.timer=setTimeout(function(){t.scroll=0,t.list.length>=2&&t.list.splice(0,1),t.stateInit(),t.showRight=!1,t.hideLeft=!1,t.timer=setTimeout(function(){t.scroll=0,t.transitionY=0,t.$nextTick(function(){t.startScroll()}),t.clearTimer(),clearTimeout(t.timer)},1e3)},500)):uni.uni.showToast({title:"今日阅读已达上限"})},clearInter:function(){clearInterval(this.inter),this.inter=null},clearTimer:function(){clearTimeout(this.timer),this.timer=null},startScroll:function(){var i=this;if(this.clearInter(),this.left){this.scroll=1;var e=uni.createSelectorQuery().select("#leftView");e.boundingClientRect(function(e){var n=e.height;i.left.read_speed;t.log("height"+n+",windowMinusFixedHeight:"+i.windowMinusFixedHeight),i.transitionY=0;var o=40,s=(n-i.windowMinusFixedHeight)/o;t.log("speed:",o,"need:",s),s<1?(s=1,i.transitionY=0,i.transitionYDuration=0):s>30?(s=30,i.transitionY=-30*o+"px",i.transitionYDuration="30s"):(i.transitionY=-s*o+"px",i.transitionYDuration=s+"s"),s=s.toFixed(4),i.timer=setTimeout(function(){i.showIncome=!0;var e=Math.random().toFixed(2),n={};n.time=(1e3*s).toFixed(0),n.income=e,i.income=e,i.finishedList.push(n),i.scroll=2,i.clearInter(),t.log(i.finishedList),i.preLength>0&&i.finishedList.length>=5&&i.report(),i.timer=setTimeout(function(){i.toNext(),t.log("------三秒钟今入下一页------")},3e3)},1e3*Math.floor(s))}).exec()}},toNext:function(){this.showIncome=!1,this.clearInter(),this.clearTimer(),this.nextNews()},getTaskList:function(t){var i=this;s.default.getTaskListOfNews({}).then(function(e){if(1===e.ret){var n=e.obj.arrNews;if(!n)return;i.lastLength=i.preLength,i.preLength=n.length,n.map(function(t){t.read_speed=e.obj.read_speed,t.second_income=e.obj.second_income,i.list.push((0,o.default)({},t))}),t&&t()}})},stateInit:function(){this.list.length>0?(this.left=this.list[0],this.list.length>1?this.right=this.list[1]:this.right=null):this.left=null},scrollInit:function(){var i=this;uni.createSelectorQuery().selectViewport().boundingClientRect(function(e){var n=e.height;t.log("windowHeight:"+n);uni.createSelectorQuery().select("#fixedButtons").boundingClientRect(function(e){i.windowMinusFixedHeight=n-e.height/2,t.log("windowMinusFixedHeight:"+i.windowMinusFixedHeight),i.startScroll()}).exec()}).exec()}},onLoad:function(){var t=this;this.getTaskList(function(){t.stateInit(),setTimeout(function(){t.scrollInit()})})},deactivated:function(){this.report(),this.clearTimer(),this.clearInter()},destroyed:function(){this.report(),this.clearTimer(),this.clearInter()}};i.default=a}).call(this,e("5a52")["default"])},"1c52":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".title[data-v-9289fd00]{font-size:%?48?%;display:block}.time[data-v-9289fd00]{font-size:%?24?%;display:block;margin-top:%?30?%;margin-bottom:%?30?%}.content[data-v-9289fd00]{clear:both;display:block;font-size:%?32?%;margin-top:%?34?%}.fixed-buttons[data-v-9289fd00]{position:fixed;bottom:0;height:%?200?%;left:0;right:0;width:100%;background:#fff;border-top:1px solid #f1f1f1;z-index:1000}.text-income[data-v-9289fd00]{max-width:%?600?%;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);bottom:%?210?%;background:rgba(0,0,0,.8);color:#fff;padding:8px;border-radius:5px;font-size:%?26?%;text-align:center}.image-gold[data-v-9289fd00]{width:%?120?%;height:%?120?%;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);bottom:%?32?%}.btn-next[data-v-9289fd00]{background:none;padding:0;font-size:%?34?%;position:absolute;right:%?32?%;top:%?32?%}.btn-next[data-v-9289fd00]:after{border:none}.out[data-v-9289fd00]{position:absolute;left:0;top:%?32?%}.out .icon-out[data-v-9289fd00]{font-size:%?100?%;color:#777;display:inline-block;vertical-align:middle;-webkit-transition:all ease-in-out .5s;-o-transition:all ease-in-out .5s;transition:all ease-in-out .5s}.out.open .icon-out[data-v-9289fd00]{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.mode-out[data-v-9289fd00]{line-height:%?42?%;margin-left:%?32?%;vertical-align:middle;display:none}.out.open .mode-out[data-v-9289fd00]{display:inline-block}.news[data-v-9289fd00]{position:absolute;display:block;top:0;left:0;right:0;\n\t/* border: 1px solid #000000; */-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?32?%;background:#fff}.news .content[data-v-9289fd00]{padding-bottom:%?220?%;overflow:hidden;line-height:%?60?%}.news .content[data-v-9289fd00] img{width:100%;margin-top:%?40?%;margin-bottom:%?40?%}#leftView[data-v-9289fd00]{left:0;-webkit-transition-timing-function:linear;-o-transition-timing-function:linear;transition-timing-function:linear}.news.left[data-v-9289fd00]{display:block}.news.left.hide[data-v-9289fd00]{display:none}.news.right[data-v-9289fd00]{left:100%;z-index:1;display:block;height:auto;-webkit-transition:left ease 0;-o-transition:left ease 0;transition:left ease 0;-webkit-transition-duration:0;-o-transition-duration:0;transition-duration:0}.news.right.show[data-v-9289fd00]{display:block;left:0;height:auto;-webkit-transition:left ease .7s;-o-transition:left ease .7s;transition:left ease .7s;-webkit-transition-duration:.3s;-o-transition-duration:.3s;transition-duration:.3s}img[data-v-9289fd00]{width:100%}p[data-v-9289fd00]{margin-top:%?36?%;margin-bottom:%?36?%;line-height:180%}",""])},2153:function(t,i,e){var n=e("1c52");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("453f818e",n,!0,{sourceMap:!1,shadowMode:!1})},"25bf":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"read-task-wrap"},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length>0"}],staticClass:"read-task",attrs:{catchtouchmove:"false"}},[t.left?e("v-uni-view",{staticClass:"news left",class:{hide:!!t.hideLeft},style:{transform:"translateY("+t.transitionY+")","transition-duration":t.transitionYDuration},attrs:{id:"leftView"}},[e("v-uni-text",{staticClass:"title strong"},[t._v(t._s(t.left.title))]),e("br"),e("v-uni-rich-text",{staticClass:"content",attrs:{type:"text",nodes:t.left.content}})],1):t._e(),t.right?e("v-uni-view",{staticClass:"news right",class:{show:!!t.showRight}},[e("v-uni-text",{staticClass:"title strong"},[t._v(t._s(t.right.title))]),e("br"),e("v-uni-view",{staticClass:"content"},[e("v-uni-rich-text",{attrs:{type:"text",nodes:t.right.content}})],1)],1):t._e(),e("v-uni-view",{staticClass:"fixed-buttons",attrs:{id:"fixedButtons"}},[e("v-uni-button",{staticClass:"btn-next btn",on:{click:function(i){i=t.$handleEvent(i),t.toNext(i)}}},[t._v("下一章"),e("v-uni-text",{staticClass:"icon iconfont icon-next"},[t._v("")])],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showIncome,expression:"showIncome"}],staticClass:"text-income"},[t._v("获得佣金"+t._s(t.income)+",即将阅读下一篇新闻")]),e("v-uni-image",{staticClass:"image-gold",attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b10000_10000&sec=1549179510&di=f207ccea0bbf3effe1cf89f2be2289fd&src=http://pic32.photophoto.cn/20140822/0007020181682728_b.jpg"}}),e("v-uni-view",{staticClass:"out",class:{open:!!t.mode}},[e("v-uni-view",{staticClass:"btn"},[e("v-uni-text",{staticClass:"mode-out",on:{click:function(i){i=t.$handleEvent(i),t.modeOut(i)}}},[t._v("退出阅"),e("br"),t._v("读模式")]),e("v-uni-view",{staticClass:"icon iconfont icon-out",on:{click:function(i){i=t.$handleEvent(i),t.toggleMode(i)}}},[t._v("")])],1)],1)],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length,expression:"list.length==0"}],staticClass:"margin-horizontal margin-vertical"},[t._v("获取新闻失败")])],1)},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})},"575c":function(t,i,e){"use strict";e.r(i);var n=e("25bf"),o=e("a0f7");for(var s in o)"default"!==s&&function(t){e.d(i,t,function(){return o[t]})}(s);e("eaf5");var a=e("2877"),r=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,"9289fd00",null);i["default"]=r.exports},a0f7:function(t,i,e){"use strict";e.r(i);var n=e("1712"),o=e.n(n);for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);i["default"]=o.a},eaf5:function(t,i,e){"use strict";var n=e("2153"),o=e.n(n);o.a}}]);