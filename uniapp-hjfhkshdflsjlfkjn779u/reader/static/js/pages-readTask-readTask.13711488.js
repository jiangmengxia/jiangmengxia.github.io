(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-readTask-readTask"],{"390e":function(t,i,e){"use strict";var n=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("5176")),a=n(e("f5c6")),s={data:function(){return{windowMinusFixedHeight:0,scroll:!1,transitionY:0,transitionYDuration:100,mode:!1,hideLeft:!1,showRight:!1,right:null,left:null,timer:null,inter:null,list:[],finishedList:[],lastLength:0,preLength:0,income:0,showIncome:!1}},watch:{list:function(t){t.length<5&&(console.log("--------------------------请求"),this.getTaskList())}},methods:{report:function(){},toggleMode:function(){this.mode=!this.mode},modeOut:function(){uni.navigateBack({delta:2})},nextNews:function(){var t=this;null!=this.right?(this.transitionY="0px",this.showRight=!0,this.hideLeft=!0,this.timer=setTimeout(function(){t.scroll=0,t.list.length>=2&&t.list.splice(0,1),t.stateInit(),t.showRight=!1,t.hideLeft=!1,setTimeout(function(){t.clearTimer(),t.scroll=0,t.transitionY=0,t.$nextTick(function(){t.startScroll()})},1e3)},500)):uni.uni.showToast({title:"今日阅读已达上限"})},clearInter:function(){clearInterval(this.inter),this.inter=null},clearTimer:function(){clearTimeout(this.timer),this.timer=null},startScroll:function(){var t=this;if(this.clearInter(),this.left){this.scroll=1;var i=uni.createSelectorQuery().select("#leftView");i.boundingClientRect(function(i){var e=i.height;t.left.read_speed;console.log("height"+e+",windowMinusFixedHeight:"+t.windowMinusFixedHeight),t.transitionY=0;var n=40,o=(e-t.windowMinusFixedHeight)/n;console.log("speed:",n,"need:",o),o<1?(o=1,t.transitionY=0,t.transitionYDuration=0):o>30?(o=30,t.transitionY=-30*n+"px",t.transitionYDuration="30s"):(t.transitionY=-o*n+"px",t.transitionYDuration=o+"s"),o=o.toFixed(4),setTimeout(function(){t.showIncome=!0;var i=Math.random().toFixed(2),e={};e.time=(1e3*o).toFixed(0),e.income=i,t.income=i,t.finishedList.push(e),t.scroll=2,t.clearInter(),console.log(t.finishedList),t.preLength>0&&t.finishedList.length>=5&&t.report(),setTimeout(function(){t.showIncome=!1,t.nextNews()},3e3)},1e3*Math.floor(o))}).exec()}},getTaskList:function(t){var i=this;a.default.getTaskListOfNews({}).then(function(e){if(1===e.ret){var n=e.obj.arrNews;if(!n)return;i.lastLength=i.preLength,i.preLength=n.length,n.map(function(t){t.read_speed=e.obj.read_speed,t.second_income=e.obj.second_income,i.list.push((0,o.default)({},t))}),t&&t()}})},stateInit:function(){this.list.length>0?(this.left=this.list[0],this.list.length>1?this.right=this.list[1]:this.right=null):this.left=null},scrollInit:function(){var t=this;uni.createSelectorQuery().selectViewport().boundingClientRect(function(i){var e=i.height;console.log("windowHeight:"+e);uni.createSelectorQuery().select("#fixedButtons").boundingClientRect(function(i){t.windowMinusFixedHeight=e-i.height/2,console.log("windowMinusFixedHeight:"+t.windowMinusFixedHeight),t.startScroll()}).exec()}).exec()}},onLoad:function(){var t=this;this.getTaskList(function(){t.stateInit(),setTimeout(function(){t.scrollInit()})})},deactivated:function(){this.report(),this.clearTimer(),this.clearInter()},destroyed:function(){this.report(),this.clearTimer(),this.clearInter()}};i.default=s},"41c5":function(t,i,e){var n=e("62e3");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=e("4f06").default;o("8bd23c8c",n,!0,{sourceMap:!1,shadowMode:!1})},"575c":function(t,i,e){"use strict";e.r(i);var n=e("64c5"),o=e("a0f7");for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);e("bde8");var s=e("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"4d83a432",null);i["default"]=r.exports},"62e3":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".title[data-v-4d83a432]{font-size:%?48?%;display:block}.time[data-v-4d83a432]{font-size:%?24?%;display:block;margin-top:%?30?%;margin-bottom:%?30?%}.content[data-v-4d83a432]{clear:both;display:block;font-size:%?32?%;margin-top:%?34?%}.fixed-buttons[data-v-4d83a432]{position:fixed;bottom:0;height:%?200?%;left:0;right:0;width:100%;background:#fff;border-top:1px solid #f1f1f1;z-index:1000}.text-income[data-v-4d83a432]{max-width:%?600?%;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);bottom:%?210?%;background:rgba(0,0,0,.8);color:#fff;padding:8px;border-radius:5px;font-size:%?26?%;text-align:center}.image-gold[data-v-4d83a432]{width:%?120?%;height:%?120?%;position:absolute;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);bottom:%?32?%}.btn-next[data-v-4d83a432]{background:none;padding:0;font-size:%?34?%;position:absolute;right:%?32?%;top:%?32?%}.btn-next[data-v-4d83a432]:after{border:none}.out[data-v-4d83a432]{position:absolute;left:0;top:%?32?%}.out .icon-out[data-v-4d83a432]{font-size:%?100?%;color:#777;display:inline-block;vertical-align:middle;-webkit-transition:all ease-in-out .5s;-o-transition:all ease-in-out .5s;transition:all ease-in-out .5s}.out.open .icon-out[data-v-4d83a432]{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.mode-out[data-v-4d83a432]{line-height:%?42?%;margin-left:%?32?%;vertical-align:middle;display:none}.out.open .mode-out[data-v-4d83a432]{display:inline-block}.news[data-v-4d83a432]{position:absolute;display:block;top:0;left:0;right:0;\n\t/* border: 1px solid #000000; */-webkit-box-sizing:border-box;box-sizing:border-box;padding:%?32?%;background:#fff}.news .content[data-v-4d83a432]{padding-bottom:%?220?%;overflow:hidden;line-height:%?60?%}.news .content[data-v-4d83a432] img{width:100%;margin-top:%?40?%;margin-bottom:%?40?%}#leftView[data-v-4d83a432]{left:0;-webkit-transition-timing-function:linear;-o-transition-timing-function:linear;transition-timing-function:linear}.news.left[data-v-4d83a432]{display:block}.news.left.hide[data-v-4d83a432]{display:none}.news.right[data-v-4d83a432]{left:100%;z-index:1;display:block;height:auto;-webkit-transition:left ease 0;-o-transition:left ease 0;transition:left ease 0;-webkit-transition-duration:0;-o-transition-duration:0;transition-duration:0}.news.right.show[data-v-4d83a432]{display:block;left:0;height:auto;-webkit-transition:left ease .7s;-o-transition:left ease .7s;transition:left ease .7s;-webkit-transition-duration:.3s;-o-transition-duration:.3s;transition-duration:.3s}img[data-v-4d83a432]{width:100%}p[data-v-4d83a432]{margin-top:%?36?%;margin-bottom:%?36?%;line-height:180%}",""])},"64c5":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"read-task-wrap"},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length>0"}],staticClass:"read-task",attrs:{catchtouchmove:"false"}},[t.left?e("v-uni-view",{staticClass:"news left",class:{hide:!!t.hideLeft},style:{transform:"translateY("+t.transitionY+")","transition-duration":t.transitionYDuration},attrs:{id:"leftView"}},[e("v-uni-text",{staticClass:"title strong"},[t._v(t._s(t.left.title))]),e("br"),e("v-uni-rich-text",{staticClass:"content",attrs:{type:"text",nodes:t.left.content}})],1):t._e(),t.right?e("v-uni-view",{staticClass:"news right",class:{show:!!t.showRight}},[e("v-uni-text",{staticClass:"title strong"},[t._v(t._s(t.right.title))]),e("br"),e("v-uni-view",{staticClass:"content"},[e("v-uni-rich-text",{attrs:{type:"text",nodes:t.right.content}})],1)],1):t._e(),e("v-uni-view",{staticClass:"fixed-buttons",attrs:{id:"fixedButtons"}},[e("v-uni-button",{staticClass:"btn-next btn",on:{click:function(i){i=t.$handleEvent(i),t.nextNews(i)}}},[t._v("下一章"),e("v-uni-text",{staticClass:"icon iconfont icon-next"},[t._v("")])],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showIncome,expression:"showIncome"}],staticClass:"text-income"},[t._v("获得佣金"+t._s(t.income)+",即将阅读下一篇新闻")]),e("v-uni-image",{staticClass:"image-gold",attrs:{src:"https://timgsa.baidu.com/timg?image&quality=80&size=b10000_10000&sec=1549179510&di=f207ccea0bbf3effe1cf89f2be2289fd&src=http://pic32.photophoto.cn/20140822/0007020181682728_b.jpg"}}),e("v-uni-view",{staticClass:"out",class:{open:!!t.mode}},[e("v-uni-view",{staticClass:"btn"},[e("v-uni-text",{staticClass:"mode-out",on:{click:function(i){i=t.$handleEvent(i),t.modeOut(i)}}},[t._v("退出阅"),e("br"),t._v("读模式")]),e("v-uni-view",{staticClass:"icon iconfont icon-out",on:{click:function(i){i=t.$handleEvent(i),t.toggleMode(i)}}},[t._v("")])],1)],1)],1)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0==t.list.length,expression:"list.length==0"}],staticClass:"margin-horizontal margin-vertical"},[t._v("获取新闻失败")])],1)},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})},a0f7:function(t,i,e){"use strict";e.r(i);var n=e("390e"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=o.a},bde8:function(t,i,e){"use strict";var n=e("41c5"),o=e.n(n);o.a}}]);