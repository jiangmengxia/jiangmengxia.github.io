# 指标先行，数据驱动

## 前言

性能优化不等于体验优化。

谈到前端优化，许多人往往只关注性能优化，但性能优化只是改善前端项目的方式之一，**改善用户体验和开发体验**才应该是我们优化的根本目的。

以往前端优化的诸多痛点：

1. **目标不明确：** 只会照本宣科，把别人的优化手段生搬硬套到自己的项目，找不到自己的优化目标；
2. **缺乏量化指标：** 无法评估优化效果，拿不出客观、可量化的指标证明优化效果；
3. **没有改善用户的主观体验：** 优化效果对用户主观体验影响甚微，无法让用户直观地感受到；
4. **欠缺长效化机制：** 无法保证优化效果长期稳定、不出现衰退；
5. **忽视开发体验：** 没有认识到开发体验和用户体验的正相关性；

1的量化目标不明确，就无法解决后面所有其他性能问题。因此建立量化指标是所有优化的先决条件。

## 1. 为什么要建立量化指标？

没有量化指标的优化是没有说服力的，不了解优化目标的现状更像是无头苍蝇，不知从何下手去实现优化。

在实施优化时，一个常常陷入的误区是不了解现状，缺乏量化优化效果的监控指标就开始优化。这样的方式往往导致自欺欺人的优化，自以为做了效果显著的改进优化，实际上并没有改善用户体验。

为了能真正的改善用户体验，我们需要在开始优化前，就建立量化指标，

* 一方面帮助我们透彻的理解优化目标的现状
* 另一方面，也可以用量化指标监控优化前后的变化，评估优化效果。

这就需要我们能把**主观**的用户体验或开发体验**量化**为**客观**的数据指标。

## 2. 将主观的体验量化为客观指标

体验是主观的，存在客观性，因此有必要将主观感受转化为客观指标。

以前端页面的加载速度为例，同一个页面，在不同的地理位置，不同的硬件设备上，加载速度都会有不同的表现，给用户的主观体验更是因人而异。

所以要测量用户对页面的加载速度的主观体验，需要考虑的因素非常多，我们需要能抹平各种影响因素差异，稳定衡量用户体验的量化手段。

业界经过多年的实践，尝试过许多量化用户体验的方式，例如：

* 测量页面白屏时长
* 计算可交互耗时（Time to interact）
* 计算总阻塞时间 (Total Blocking Time，TBT)
* 计算首次有效绘制 (First Meaningful Paint，FMP)

但这些指标往往逻辑复杂、难以测量，甚至定义都有显著的歧义，所以**逐渐消亡**。

经过大浪淘沙，近年来最实用的用户体验量化指标是基于开源库`web-vitals`获取的页面渲染耗时，交互延迟等指标。

> `web-vitals` GitHub 仓库: [github.com/GoogleChrom…](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FGoogleChrome%2Fweb-vitals)

## 小结

这一节中我们主要学习了建立量化指标的意义，是为了能真正的改善用户体验。
